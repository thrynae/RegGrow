
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>RegGrow</title><meta name="generator" content="MATLAB 9.13"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2023-02-17"><meta name="DC.source" content="RegGrow.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>RegGrow</h1><!--introduction--><p><tt style="font-size:0%">Formatted documentation for the RegGrow function.</tt>
<div style="margin-top:-5em;color:grey">Region growing algorithm (supports 2D, 3D, and ND)
</div>
</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Description</a></li><li><a href="#2">Syntax</a></li><li><a href="#3">Output arguments</a></li><li><a href="#4">Input arguments</a></li><li><a href="#5">Name,Value pairs</a></li><li><a href="#6">Example: Segment the background</a></li><li><a href="#9">Example: Detect segmentation leak</a></li><li><a href="#11">Compatibility, version info, and licence</a></li><li><a href="#12">Performance</a></li><li><a href="#13">Test suite</a></li></ul></div><h2 id="1">Description</h2><p>
This is an implementation of a region growing algorithm written entirely in m-code. By using
<code>convn</code> it has a reasonable performance and supports 2D, 3D, and ND arrays.
<br> In each iteration, look at all voxels in the N-neighborhood of the already segmented region.
From those voxels, add those that are within maxDiff of the mean of the region. Keep repeating
the loop until no more pixels are added.
<br><br>
The default neighborhood is the minimal neighborhood (4 for 2D, 6 for 3D, 2*dims for ND). As an
alternative to entering the neighborhood, a custom kernel can be entered as a binary matrix with
the same number of dimensions as the input image.
<br><br>
This is slower than a mex implementation would be, but this should be compatible with any release
and will return the same result on any release (including GNU Octave).
</p><h2 id="2">Syntax</h2><pre class="language-matlab">result = RegGrow(I)
result = RegGrow(I,maxDiff)
result = RegGrow(I,maxDiff,seed)
result = RegGrow(___,Name,Value)
result = RegGrow(___,options)
[result,OverflowFlag]=RegGrow(___)
</pre><p>Note: running without inputs runs on an example image.</p><h2 id="3">Output arguments</h2><p>
<table border=1>
<tr><td>
result
</td><td>
The result of the region growing. This will be a logical array of the same size as the input
image.
</td></tr>
<tr><td>
OverflowFlag
</td><td>
A flag in case of overflow. See below for how to enable checking for an overflow. Normally this
output should be false.
</td></tr>
</table>
</p><h2 id="4">Input arguments</h2><p>
<table border=1>
<tr><td>
I
</td><td>
The image to use, which can be any data type that can be converted to a double.
</td></tr>
<tr><td>
maxDiff
</td><td>
The maximum difference between the mean of the currently segmented pixels and candidate pixels
that will be added. All candidate pixels are tested at the same time. This value is treated as an
absolute value. If omitted, the default value is 2/3*std(I(:)).
<br>This parameter must be a scalar double, or be convertible to one.
</td></tr>
<tr><td>
seed
</td><td>
The initial starting point of the algorithm. If omitted, the default value is the first pixel
(linear index 1). If you want to use multiple seeds, you can use the ResumeSegmentation
parameter. If the ResumeSegmentation is provided, this parameter is ignored.
</td></tr>
<tr><td>
Name,Value
</td><td>
In addition to the previous parameters, the settings below can be entered with a Name,Value
syntax. The parameter names are not case-sensitive.
</td></tr>
<tr><td>
options
</td><td>
Instead of the Name,Value, parameters can also be entered in a struct. Missing fields will be set
to the default values. Field names are not case-sensitive.
</td></tr>
</table>
</p><h2 id="5">Name,Value pairs</h2><p>
<table border=1>
<tr><td>
kernel
</td><td>
The kernel input allows more flexibility in the direction of growth. This parameter must be a
logical array or be convertible to one. Each dimension must have an odd length. The center pixel
is set to true.
<br>Note that is parameter describes the direction of growth and is therefore dissimilar to a
convolution kernel (i.e. it is flipped along all directions).
</td></tr>
<tr><td>
nHood
</td><td>
The neighborhood that is checked. By default the minimal neighborhood is used (4-neighborhood for
2D images and 6-neighborhood for 3D images).
<br>This setting is ignored if the kernel input is provided.
</td></tr>
<tr><td>
overflow
</td><td>
This parameter is the maximum number of voxels/pixels included in the region. This allows the
process to exit before it is complete if too many pixels are being segmented, indicating a
segmentation leak. A leak can cause the segmentation to take a very long time to complete,
especially for 3D images. If the segmented area or volume exceeds this value (counted as number
of pixels or voxels), the second output is set to true and the function halts. No error or
warning is triggered. This value must be either false, or a positive integer, or a value between
0 and 1, in which case it is treated as a fraction of the total number of elements.
</td></tr>
<tr><td>
ResumeSegmentation
</td><td>
This parameter allows resuming the region growing from a previous aborted result (e.g. closing
the waitbar or exceeding the overflow parameter). This also allows growing from multiple seed
points. If this parameter is provided the seed parameter is ignored.
<code>ResumeSegmentation</code> needs to be a logical of the same size as the image with at least
1&nbsp;element set to <code>true</code>.
</td></tr>
<tr><td>
silent
</td><td>
This is the inverse of the waitbar switch, but it is ignored if wairbar is specified. It is
provided to improve code readability.
</td></tr>
<tr><td>
waitbar
</td><td>
Use a waitbar to show the progress of the region growing. The maximum value is either the
overflow, or the total number of voxels. This means the waitbar shouldn't reach 100%, but does
provide a visual indication of progress. The default is false for 2D input and true for higher
dimensional input.
</td></tr>
<tr><td>
WaitbarClosingBehavior
</td><td>
This parameter must be <code>'warning'</code>, <code>'error'</code>, <code>'return'</code>, or
<code>'ignore'</code>. The default is <code>'ignore'</code>. If set to warn or error, closing the
waitbar will cause a warning/error to be triggered. Setting to <code>'return'</code> will cause
the function to return the incomplete result.
</td></tr>
</table>
</p><h2 id="6">Example: Segment the background</h2><p>The default example image is taken from the image generated by the image function. For the full back story, see <a href="https://blogs.mathworks.com/steve/2006/10/17/the-story-behind-the-matlab-default-image/">this blog post</a>. In GNU Octave this image is not available and it is replaced by a logo image. The example setup will still work as intended.</p><pre class="codeinput"><span class="comment">% Generate an image.</span>
<span class="keyword">if</span> exist(<span class="string">'OCTAVE_VERSION'</span>, <span class="string">'builtin'</span>)
    IM = get(0,<span class="string">'DefaultImageCData'</span>);IM = IM/max(IM(:));
<span class="keyword">else</span>
    defimage = pow2(get(0,<span class="string">'DefaultImageCData'</span>),47);
    IM = bitshift(defimage,-37);IM = fix(IM);
    IM = bitand(IM,31);IM = IM/max(IM(:));
<span class="keyword">end</span>

<span class="comment">% Call RegGrow without input to segment the background in the example image.</span>
mask=RegGrow;

<span class="comment">% Fuse image and mask.</span>
r_factor=0.5;[R,G,B]=deal(IM,IM,IM);R(mask)=r_factor+R(mask)*(1-r_factor);G(mask)=G(mask)/2;B(mask)=B(mask)/2;fused=cat(3,R,G,B);
subplot(1,2,1),imshow(IM),title(<span class="string">'original example image'</span>)
subplot(1,2,2),imshow(fused),title(<span class="string">'segmented background'</span>)
</pre><p><img vspace="5" hspace="5" src="RegGrow_show_default.png" alt=""> </p><h2 id="9">Example: Detect segmentation leak</h2><pre class="codeinput">opts=struct;
opts.seed=[24 30];
opts.maxDiff=0.15;

tic,r{1}=RegGrow(IM,opts);t1=toc;

opts.overflow=100;
tic,r{2}=RegGrow(IM,opts);t2=toc;

opts.overflow=[];opts.maxDiff=0.1;
tic,r{3}=RegGrow(IM,opts);t3=toc;

IM_=cell(1,3);
<span class="keyword">for</span> n=1:3
    <span class="comment">% Fuse image and mask.</span>
    r_factor=0.5;[R,G,B]=deal(IM,IM,IM);R(r{n})=r_factor+R(r{n})*(1-r_factor);G(r{n})=G(r{n})/2;B(r{n})=B(r{n})/2;fused=cat(3,R,G,B);
    IM_{n}=fused;
<span class="keyword">end</span>

subplot(2,2,1),imshow(IM),title({<span class="string">'original example image'</span>,<span class="string">'( * = seed)'</span>})
hold <span class="string">on</span>,plot(opts.seed(2),opts.seed(1),<span class="string">'y*'</span>),hold <span class="string">off</span>
subplot(2,2,2),imshow(IM_{1})
title({<span class="string">'leaked segmentation'</span>,sprintf(<span class="string">'(t=%.1fms)'</span>,1000*t1)})
subplot(2,2,3),imshow(IM_{2})
title({<span class="string">'with leak detection'</span>,sprintf(<span class="string">'(t=%.1fms)'</span>,1000*t2)})
subplot(2,2,4),imshow(IM_{3})
title({sprintf(<span class="string">'better maxDiff: %.2f'</span>,opts.maxDiff),sprintf(<span class="string">'(t=%.1fms)'</span>,1000*t3)})
</pre><p><img vspace="5" hspace="5" src="RegGrow_show_leak_detection.png" alt=""> </p><h2 id="11">Compatibility, version info, and licence</h2><p>
Compatibility considerations:
<ul>
   <li> None. This is expected to work on all releases.</li>
</ul>
</p><p>
<table>
<tr>
<td> Test suite result </td>
<td style="border:2px solid black;"> Windows </td>
<td style="border:2px solid black;"> Linux </td>
<td style="border:2px solid black;"> MacOS </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2022b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_22.04 : Pass</it> </td>
<td> <it>Monterey : Pass</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2022a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2021b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_22.04 : Pass</it> </td>
<td> <it>Monterey : Pass</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2021a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2020b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_22.04 : Pass</it> </td>
<td> <it>Monterey : Pass</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2020a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2019b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_22.04 : Pass</it> </td>
<td> <it>Monterey : Pass</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2019a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2018a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_22.04 : Pass</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2017b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_22.04 : Pass</it> </td>
<td> <it>Monterey : Pass</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2016b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_22.04 : Pass</it> </td>
<td> <it>Monterey : Pass</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2015a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_22.04 : Pass</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2013b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2007b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab 7.1 (R14SP3) </td>
<td> <it>XP : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab 6.5 (R13) </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Octave 7.2.0 </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Octave 6.2.0 </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>raspbian_11 : Partial</it> </td>
<td> <it>Catalina : Partial</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Octave 5.2.0 </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Octave 4.4.1 </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it>Catalina : Partial</it> </td>
</tr>
</table>
</p><pre>Version: 1.3.0
Date:    2023-02-17
Author:  H.J. Wisselink
Licence: CC by-nc-sa 4.0 ( https://creativecommons.org/licenses/by-nc-sa/4.0 )
Email = 'h_j_wisselink*alumnus_utwente_nl';
Real_email = regexprep(Email,{'*','_'},{'@','.'})</pre><h2 id="12">Performance</h2><p>
The benchmarking function used to generate the results below can be found
<a href=https://web.archive.org/web/20230217154437/https://cdn-141.anonfiles.com/z1B1B5Y8y6/51828150-1676649273/aaa___RegGrow___performance_test.m>here</a>.
<br>The test results shown in the tables below are normalized to the results of the newest
Matlab release, since the performace is strongly dependent on the specific
computer running the test. To allow absolute comparisons as well the results in that cell
are shown in seconds.
<br>
<br>The results for Ubuntu and the results for Octave on MacOS were obtained in a VM, so
the performance is likely an underestimation of the true performance. The normalization
should compensate for most of this effect.
<br>
<br>Test 1: 250 by 250 pixel snake
<br>Test 2: 60 voxel 3D gradient
<br>
<table>
<tr>
<td> Test suite result </td>
<td style="border:2px solid black;"> Windows </td>
<td style="border:2px solid black;"> Ubuntu 20.04 LTS </td>
<td style="border:2px solid black;"> MacOS </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2022b </td>
<td> (W10) <br> 0.086&nbsp;s <br> 0.204&nbsp;s </td>
<td> (ubuntu_22.04) <br> 0.122&nbsp;s <br> 0.216&nbsp;s </td>
<td> (Monterey) <br> 0.365&nbsp;s <br> 0.766&nbsp;s </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2022a </td>
<td> (W10) <br> 116&nbsp;% <br> 105&nbsp;% </td>
<td>  </td>
<td>  </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2021b </td>
<td> (W10) <br> 99&nbsp;% <br> 107&nbsp;% </td>
<td> (ubuntu_22.04) <br> 109&nbsp;% <br> 110&nbsp;% </td>
<td> (Monterey) <br> 100&nbsp;% <br> 101&nbsp;% </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2021a </td>
<td> (W10) <br> 101&nbsp;% <br> 102&nbsp;% </td>
<td>  </td>
<td>  </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2020b </td>
<td> (W10) <br> 102&nbsp;% <br> 104&nbsp;% </td>
<td> (ubuntu_22.04) <br> 95&nbsp;% <br> 110&nbsp;% </td>
<td> (Monterey) <br> 120&nbsp;% <br> 99&nbsp;% </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2020a </td>
<td> (W10) <br> 144&nbsp;% <br> 118&nbsp;% </td>
<td>  </td>
<td>  </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2019b </td>
<td> (W10) <br> 141&nbsp;% <br> 116&nbsp;% </td>
<td> (ubuntu_22.04) <br> 119&nbsp;% <br> 113&nbsp;% </td>
<td> (Monterey) <br> 120&nbsp;% <br> 102&nbsp;% </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2019a </td>
<td> (W10) <br> 170&nbsp;% <br> 125&nbsp;% </td>
<td>  </td>
<td>  </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2018a </td>
<td> (W10) <br> 219&nbsp;% <br> 132&nbsp;% </td>
<td> (ubuntu_22.04) <br> 128&nbsp;% <br> 98&nbsp;% </td>
<td>  </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2017b </td>
<td> (W10) <br> 219&nbsp;% <br> 152&nbsp;% </td>
<td> (ubuntu_22.04) <br> 121&nbsp;% <br> 121&nbsp;% </td>
<td> (Monterey) <br> 117&nbsp;% <br> 90&nbsp;% </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2016b </td>
<td> (W10) <br> 242&nbsp;% <br> 324&nbsp;% </td>
<td> (ubuntu_22.04) <br> 113&nbsp;% <br> 189&nbsp;% </td>
<td> (Monterey) <br> 124&nbsp;% <br> 145&nbsp;% </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2015a </td>
<td> (W10) <br> 248&nbsp;% <br> 328&nbsp;% </td>
<td> (ubuntu_22.04) <br> 168&nbsp;% <br> 227&nbsp;% </td>
<td>  </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2013b </td>
<td> (W10) <br> 237&nbsp;% <br> 349&nbsp;% </td>
<td>  </td>
<td>  </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab R2007b </td>
<td> (W10) <br> 1&thinsp;281&nbsp;% <br> 2&thinsp;588&nbsp;% </td>
<td>  </td>
<td>  </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab 7.1 (R14SP3) </td>
<td> (XP) <br> 1&thinsp;957&nbsp;% <br> 2&thinsp;838&nbsp;% </td>
<td>  </td>
<td>  </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Matlab 6.5 (R13) </td>
<td> (W10) <br> 2&thinsp;242&nbsp;% <br> 2&thinsp;743&nbsp;% </td>
<td>  </td>
<td>  </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Octave 7.2.0 </td>
<td> (W10) <br> 214&nbsp;% <br> 213&nbsp;% </td>
<td>  </td>
<td>  </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Octave 6.2.0 </td>
<td> (W10) <br> 185&nbsp;% <br> 190&nbsp;% </td>
<td> (raspbian_11) <br> 1&thinsp;413&nbsp;% <br> 2&thinsp;465&nbsp;% </td>
<td> (Catalina) <br> 66&nbsp;% <br> 47&nbsp;% </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Octave 5.2.0 </td>
<td> (W10) <br> 310&nbsp;% <br> 253&nbsp;% </td>
<td>  </td>
<td>  </td>
</tr>
<tr>
<td style="border:2px solid black;vertical-align:middle"> Octave 4.4.1 </td>
<td> (W10) <br> 234&nbsp;% <br> 207&nbsp;% </td>
<td>  </td>
<td> (Catalina) <br> 75&nbsp;% <br> 47&nbsp;% </td>
</tr>
</table>
</p><h2 id="13">Test suite</h2><p>This tester is included so you can test if your own modifications would introduce any bugs. These tests form the basis for the compatibility table above. Note that functions may be different between the tester version and the normal function. Make sure to apply any modifications to both. The full tester function (including all comments) can be found <a href="https://web.archive.org/web/20230217154605/https://cdn-151.anonfiles.com/4dC4B0Y4y2/170d432e-1676649359/aaa___RegGrow___test.m">here</a>.</p><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2022b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% RegGrow
%
% <html><tt style="font-size:0%">Formatted documentation for the RegGrow function.</tt>
% <div style="margin-top:-5em;color:grey">Region growing algorithm (supports 2D, 3D, and ND)
% </div>
% </html>

%% Description
% <html>
% This is an implementation of a region growing algorithm written entirely in m-code. By using
% <code>convn</code> it has a reasonable performance and supports 2D, 3D, and ND arrays.
% <br> In each iteration, look at all voxels in the N-neighborhood of the already segmented region.
% From those voxels, add those that are within maxDiff of the mean of the region. Keep repeating
% the loop until no more pixels are added.
% <br><br>
% The default neighborhood is the minimal neighborhood (4 for 2D, 6 for 3D, 2*dims for ND). As an
% alternative to entering the neighborhood, a custom kernel can be entered as a binary matrix with
% the same number of dimensions as the input image.
% <br><br>
% This is slower than a mex implementation would be, but this should be compatible with any release
% and will return the same result on any release (including GNU Octave).
% </html>

%% Syntax
%
%   result = RegGrow(I)
%   result = RegGrow(I,maxDiff)
%   result = RegGrow(I,maxDiff,seed)
%   result = RegGrow(___,Name,Value)
%   result = RegGrow(___,options)
%   [result,OverflowFlag]=RegGrow(___)
%
% Note: running without inputs runs on an example image.

%% Output arguments
%
% <html>
% <table border=1>
% <tr><td>
% result
% </td><td>
% The result of the region growing. This will be a logical array of the same size as the input
% image.
% </td></tr>
% <tr><td>
% OverflowFlag
% </td><td>
% A flag in case of overflow. See below for how to enable checking for an overflow. Normally this
% output should be false.
% </td></tr>
% </table>
% </html>

%% Input arguments
%
% <html>
% <table border=1>
% <tr><td>
% I
% </td><td>
% The image to use, which can be any data type that can be converted to a double.
% </td></tr>
% <tr><td>
% maxDiff
% </td><td>
% The maximum difference between the mean of the currently segmented pixels and candidate pixels
% that will be added. All candidate pixels are tested at the same time. This value is treated as an
% absolute value. If omitted, the default value is 2/3*std(I(:)).
% <br>This parameter must be a scalar double, or be convertible to one.
% </td></tr>
% <tr><td>
% seed
% </td><td>
% The initial starting point of the algorithm. If omitted, the default value is the first pixel
% (linear index 1). If you want to use multiple seeds, you can use the ResumeSegmentation
% parameter. If the ResumeSegmentation is provided, this parameter is ignored.
% </td></tr>
% <tr><td>
% Name,Value
% </td><td>
% In addition to the previous parameters, the settings below can be entered with a Name,Value
% syntax. The parameter names are not case-sensitive.
% </td></tr>
% <tr><td>
% options
% </td><td>
% Instead of the Name,Value, parameters can also be entered in a struct. Missing fields will be set
% to the default values. Field names are not case-sensitive.
% </td></tr>
% </table>
% </html>

%% Name,Value pairs
%
% <html>
% <table border=1>
% <tr><td>
% kernel
% </td><td>
% The kernel input allows more flexibility in the direction of growth. This parameter must be a
% logical array or be convertible to one. Each dimension must have an odd length. The center pixel
% is set to true.
% <br>Note that is parameter describes the direction of growth and is therefore dissimilar to a
% convolution kernel (i.e. it is flipped along all directions).
% </td></tr>
% <tr><td>
% nHood
% </td><td>
% The neighborhood that is checked. By default the minimal neighborhood is used (4-neighborhood for
% 2D images and 6-neighborhood for 3D images).
% <br>This setting is ignored if the kernel input is provided.
% </td></tr>
% <tr><td>
% overflow
% </td><td>
% This parameter is the maximum number of voxels/pixels included in the region. This allows the
% process to exit before it is complete if too many pixels are being segmented, indicating a
% segmentation leak. A leak can cause the segmentation to take a very long time to complete,
% especially for 3D images. If the segmented area or volume exceeds this value (counted as number
% of pixels or voxels), the second output is set to true and the function halts. No error or
% warning is triggered. This value must be either false, or a positive integer, or a value between
% 0 and 1, in which case it is treated as a fraction of the total number of elements.
% </td></tr>
% <tr><td>
% ResumeSegmentation
% </td><td>
% This parameter allows resuming the region growing from a previous aborted result (e.g. closing
% the waitbar or exceeding the overflow parameter). This also allows growing from multiple seed
% points. If this parameter is provided the seed parameter is ignored.
% <code>ResumeSegmentation</code> needs to be a logical of the same size as the image with at least
% 1&nbsp;element set to <code>true</code>.
% </td></tr>
% <tr><td>
% silent
% </td><td>
% This is the inverse of the waitbar switch, but it is ignored if wairbar is specified. It is
% provided to improve code readability.
% </td></tr>
% <tr><td>
% waitbar
% </td><td>
% Use a waitbar to show the progress of the region growing. The maximum value is either the
% overflow, or the total number of voxels. This means the waitbar shouldn't reach 100%, but does
% provide a visual indication of progress. The default is false for 2D input and true for higher
% dimensional input.
% </td></tr>
% <tr><td>
% WaitbarClosingBehavior
% </td><td>
% This parameter must be <code>'warning'</code>, <code>'error'</code>, <code>'return'</code>, or
% <code>'ignore'</code>. The default is <code>'ignore'</code>. If set to warn or error, closing the
% waitbar will cause a warning/error to be triggered. Setting to <code>'return'</code> will cause
% the function to return the incomplete result.
% </td></tr>
% </table>
% </html>

%% Example: Segment the background
%
% The default example image is taken from the image generated by the image function. For the full
% back story, see
% <https://blogs.mathworks.com/steve/2006/10/17/the-story-behind-the-matlab-default-image/ this
% blog post>. In GNU Octave this image is not available and it is replaced by a logo image. The
% example setup will still work as intended.
%%

% Generate an image.
if exist('OCTAVE_VERSION', 'builtin')
    IM = get(0,'DefaultImageCData');IM = IM/max(IM(:));
else
    defimage = pow2(get(0,'DefaultImageCData'),47);
    IM = bitshift(defimage,-37);IM = fix(IM);
    IM = bitand(IM,31);IM = IM/max(IM(:));
end

% Call RegGrow without input to segment the background in the example image.
mask=RegGrow;

% Fuse image and mask.
r_factor=0.5;[R,G,B]=deal(IM,IM,IM);R(mask)=r_factor+R(mask)*(1-r_factor);G(mask)=G(mask)/2;B(mask)=B(mask)/2;fused=cat(3,R,G,B);
subplot(1,2,1),imshow(IM),title('original example image')
subplot(1,2,2),imshow(fused),title('segmented background')
%%
% <<RegGrow_show_default.png>>
%% Example: Detect segmentation leak
opts=struct;
opts.seed=[24 30];
opts.maxDiff=0.15;

tic,r{1}=RegGrow(IM,opts);t1=toc;

opts.overflow=100;
tic,r{2}=RegGrow(IM,opts);t2=toc;

opts.overflow=[];opts.maxDiff=0.1;
tic,r{3}=RegGrow(IM,opts);t3=toc;

IM_=cell(1,3);
for n=1:3
    % Fuse image and mask.
    r_factor=0.5;[R,G,B]=deal(IM,IM,IM);R(r{n})=r_factor+R(r{n})*(1-r_factor);G(r{n})=G(r{n})/2;B(r{n})=B(r{n})/2;fused=cat(3,R,G,B);
    IM_{n}=fused;
end

subplot(2,2,1),imshow(IM),title({'original example image','( * = seed)'})
hold on,plot(opts.seed(2),opts.seed(1),'y*'),hold off
subplot(2,2,2),imshow(IM_{1})
title({'leaked segmentation',sprintf('(t=%.1fms)',1000*t1)})
subplot(2,2,3),imshow(IM_{2})
title({'with leak detection',sprintf('(t=%.1fms)',1000*t2)})
subplot(2,2,4),imshow(IM_{3})
title({sprintf('better maxDiff: %.2f',opts.maxDiff),sprintf('(t=%.1fms)',1000*t3)})
%%
% <<RegGrow_show_leak_detection.png>>

%% Compatibility, version info, and licence
% <html>
% Compatibility considerations:
% <ul>
%    <li> None. This is expected to work on all releases.</li>
% </ul>
% </html>
% 
% <html>
% <table>
% <tr>
% <td> Test suite result </td>
% <td style="border:2px solid black;"> Windows </td>
% <td style="border:2px solid black;"> Linux </td>
% <td style="border:2px solid black;"> MacOS </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2022b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_22.04 : Pass</it> </td>
% <td> <it>Monterey : Pass</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2022a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2021b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_22.04 : Pass</it> </td>
% <td> <it>Monterey : Pass</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2021a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2020b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_22.04 : Pass</it> </td>
% <td> <it>Monterey : Pass</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2020a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2019b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_22.04 : Pass</it> </td>
% <td> <it>Monterey : Pass</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2019a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2018a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_22.04 : Pass</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2017b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_22.04 : Pass</it> </td>
% <td> <it>Monterey : Pass</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2016b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_22.04 : Pass</it> </td>
% <td> <it>Monterey : Pass</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2015a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_22.04 : Pass</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2013b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2007b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab 7.1 (R14SP3) </td>
% <td> <it>XP : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab 6.5 (R13) </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Octave 7.2.0 </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Octave 6.2.0 </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>raspbian_11 : Partial</it> </td>
% <td> <it>Catalina : Partial</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Octave 5.2.0 </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Octave 4.4.1 </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it>Catalina : Partial</it> </td>
% </tr>
% </table>
% </html>
%
%  Version: 1.3.0
%  Date:    2023-02-17
%  Author:  H.J. Wisselink
%  Licence: CC by-nc-sa 4.0 ( https://creativecommons.org/licenses/by-nc-sa/4.0 )
%  Email = 'h_j_wisselink*alumnus_utwente_nl';
%  Real_email = regexprep(Email,{'*','_'},{'@','.'})

%% Performance
% <html>
% The benchmarking function used to generate the results below can be found
% <a href=https://web.archive.org/web/20230217154437/https://cdn-141.anonfiles.com/z1B1B5Y8y6/51828150-1676649273/aaa___RegGrow___performance_test.m>here</a>.
% <br>The test results shown in the tables below are normalized to the results of the newest
% Matlab release, since the performace is strongly dependent on the specific
% computer running the test. To allow absolute comparisons as well the results in that cell
% are shown in seconds.
% <br>
% <br>The results for Ubuntu and the results for Octave on MacOS were obtained in a VM, so
% the performance is likely an underestimation of the true performance. The normalization 
% should compensate for most of this effect.
% <br>
% <br>Test 1: 250 by 250 pixel snake
% <br>Test 2: 60 voxel 3D gradient
% <br>
% <table>
% <tr>
% <td> Test suite result </td>
% <td style="border:2px solid black;"> Windows </td>
% <td style="border:2px solid black;"> Ubuntu 20.04 LTS </td>
% <td style="border:2px solid black;"> MacOS </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2022b </td>
% <td> (W10) <br> 0.086&nbsp;s <br> 0.204&nbsp;s </td>
% <td> (ubuntu_22.04) <br> 0.122&nbsp;s <br> 0.216&nbsp;s </td>
% <td> (Monterey) <br> 0.365&nbsp;s <br> 0.766&nbsp;s </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2022a </td>
% <td> (W10) <br> 116&nbsp;% <br> 105&nbsp;% </td>
% <td>  </td>
% <td>  </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2021b </td>
% <td> (W10) <br> 99&nbsp;% <br> 107&nbsp;% </td>
% <td> (ubuntu_22.04) <br> 109&nbsp;% <br> 110&nbsp;% </td>
% <td> (Monterey) <br> 100&nbsp;% <br> 101&nbsp;% </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2021a </td>
% <td> (W10) <br> 101&nbsp;% <br> 102&nbsp;% </td>
% <td>  </td>
% <td>  </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2020b </td>
% <td> (W10) <br> 102&nbsp;% <br> 104&nbsp;% </td>
% <td> (ubuntu_22.04) <br> 95&nbsp;% <br> 110&nbsp;% </td>
% <td> (Monterey) <br> 120&nbsp;% <br> 99&nbsp;% </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2020a </td>
% <td> (W10) <br> 144&nbsp;% <br> 118&nbsp;% </td>
% <td>  </td>
% <td>  </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2019b </td>
% <td> (W10) <br> 141&nbsp;% <br> 116&nbsp;% </td>
% <td> (ubuntu_22.04) <br> 119&nbsp;% <br> 113&nbsp;% </td>
% <td> (Monterey) <br> 120&nbsp;% <br> 102&nbsp;% </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2019a </td>
% <td> (W10) <br> 170&nbsp;% <br> 125&nbsp;% </td>
% <td>  </td>
% <td>  </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2018a </td>
% <td> (W10) <br> 219&nbsp;% <br> 132&nbsp;% </td>
% <td> (ubuntu_22.04) <br> 128&nbsp;% <br> 98&nbsp;% </td>
% <td>  </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2017b </td>
% <td> (W10) <br> 219&nbsp;% <br> 152&nbsp;% </td>
% <td> (ubuntu_22.04) <br> 121&nbsp;% <br> 121&nbsp;% </td>
% <td> (Monterey) <br> 117&nbsp;% <br> 90&nbsp;% </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2016b </td>
% <td> (W10) <br> 242&nbsp;% <br> 324&nbsp;% </td>
% <td> (ubuntu_22.04) <br> 113&nbsp;% <br> 189&nbsp;% </td>
% <td> (Monterey) <br> 124&nbsp;% <br> 145&nbsp;% </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2015a </td>
% <td> (W10) <br> 248&nbsp;% <br> 328&nbsp;% </td>
% <td> (ubuntu_22.04) <br> 168&nbsp;% <br> 227&nbsp;% </td>
% <td>  </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2013b </td>
% <td> (W10) <br> 237&nbsp;% <br> 349&nbsp;% </td>
% <td>  </td>
% <td>  </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab R2007b </td>
% <td> (W10) <br> 1&thinsp;281&nbsp;% <br> 2&thinsp;588&nbsp;% </td>
% <td>  </td>
% <td>  </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab 7.1 (R14SP3) </td>
% <td> (XP) <br> 1&thinsp;957&nbsp;% <br> 2&thinsp;838&nbsp;% </td>
% <td>  </td>
% <td>  </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Matlab 6.5 (R13) </td>
% <td> (W10) <br> 2&thinsp;242&nbsp;% <br> 2&thinsp;743&nbsp;% </td>
% <td>  </td>
% <td>  </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Octave 7.2.0 </td>
% <td> (W10) <br> 214&nbsp;% <br> 213&nbsp;% </td>
% <td>  </td>
% <td>  </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Octave 6.2.0 </td>
% <td> (W10) <br> 185&nbsp;% <br> 190&nbsp;% </td>
% <td> (raspbian_11) <br> 1&thinsp;413&nbsp;% <br> 2&thinsp;465&nbsp;% </td>
% <td> (Catalina) <br> 66&nbsp;% <br> 47&nbsp;% </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Octave 5.2.0 </td>
% <td> (W10) <br> 310&nbsp;% <br> 253&nbsp;% </td>
% <td>  </td>
% <td>  </td>
% </tr>
% <tr>
% <td style="border:2px solid black;vertical-align:middle"> Octave 4.4.1 </td>
% <td> (W10) <br> 234&nbsp;% <br> 207&nbsp;% </td>
% <td>  </td>
% <td> (Catalina) <br> 75&nbsp;% <br> 47&nbsp;% </td>
% </tr>
% </table>
% </html>

%% Test suite
%
% This tester is included so you can test if your own modifications would introduce
% any bugs. These tests form the basis for the compatibility table above. Note that
% functions may be different between the tester version and the normal function. Make
% sure to apply any modifications to both. The full tester function (including all
% comments) can be found <https://web.archive.org/web/20230217154605/https://cdn-151.anonfiles.com/4dC4B0Y4y2/170d432e-1676649359/aaa___RegGrow___test.m here>.

##### SOURCE END #####
--></body></html>